
## 락

### 동시성 제어
- 트랜잭션이 한 개의 데이터에 접근할 때 발생할 수 있는 상황을 정리하면
  - 읽기-읽기 : 문제 발생 하지 않음
  - 읽기-쓰기 : dirty read, non-repeatable read, phantom read
  - 쓰기-쓰기 : lost update

### lost update
- 두 개의 트랜잭션이 한 개의 데이터를 동시에 갱신할 때 발생
- 갱신 작업이 무효화 되고 새로운 값으로 덮어쓰여짐 

### Lock
- 락은 트랜잭션이 데이터를 읽거나 수정할 때 데이터에 표시되는 잠금장치
- 다른 트랜잭션은 잠금이 풀릴 때까지 기다려야 한다.
- Shard Lock (LS) (공유락) : LS가 결려져 있을때 다른 트랜잭션의 LS 요청은 허용, LX는 허용하지 않음  
- Exclusive Lock (LX) (배타락) : LX가 결려져 있을때 다른 트랜잭션의 LS, LX는 허용하지 않음  

### 2 phase Locking
- 위의 방식만으로는 두 개의 트랜잭션이 동시에 실행될 때 데이터의 일관성이 깨질 수 있다.
- 이를 방지하기 위해 2단계 락킹 기법을 진행한다.
- growing phase : 락을 휙득하는 단계다. 이미 휙득한 락을 해제하지 않는다.
- shrinking phase : 락을 해제하는 단계다. 새로운 락을 휙득하지 않는다.

### 데드락
- 두개 이상의 트랜잭션이 각각 자신의 데이터에 대하여 락을 휙득하고 상대방 데이터에 대하여 락을 요청해 무한 대기 상태에 빠지는것
